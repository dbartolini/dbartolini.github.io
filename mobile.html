<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mobile check</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }
    .full {
      height: 100vh;
      width: 100vw;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      box-sizing: border-box;
      text-align: center;
    }
    .mobile { background: #c62828; } /* red */
    .desktop { background: #2e7d32; } /* green */
    .label { font-size: 22px; font-weight: 600; }
    .sub { margin-top: 8px; font-size: 14px; opacity: 0.9; }
  </style>
</head>
<body>
<script>
  function isMobileDevice() {
    try {
      // 1) Modern UA Client Hints (Chromium-based)
      if (navigator.userAgentData && typeof navigator.userAgentData.mobile === 'boolean') {
        if (navigator.userAgentData.mobile) return true;
      }

      var ua = (navigator.userAgent || '').toLowerCase();
      var platform = (navigator.platform || '').toLowerCase();

      // 2) Common mobile tokens
      var mobileTokens = ["iphone","ipod","android","blackberry","bb10","mobile","windows phone","opera mini","silk"];
      for (var i = 0; i < mobileTokens.length; i++) {
        if (ua.indexOf(mobileTokens[i]) !== -1) return true;
      }

      // 3) iPadOS (reports MacIntel) + touchpoints
      if ((platform.indexOf('macintel') !== -1 || ua.indexOf('ipad') !== -1) && navigator.maxTouchPoints && navigator.maxTouchPoints > 1) {
        return true;
      }

      // 4) Touch heuristics combined with screen size / pointer type
      var touchPoints = navigator.maxTouchPoints || 0;
      var hasTouch = ('ontouchstart' in window) || touchPoints > 0;
      var coarsePointer = false;
      try {
        coarsePointer = window.matchMedia && window.matchMedia('(pointer: coarse)').matches;
      } catch (e) { /* ignore */ }

      if (hasTouch && (coarsePointer || Math.min(window.innerWidth, window.innerHeight) < 1000)) {
        return true;
      }

      return false;
    } catch (e) {
      // If detection fails, assume desktop (safer for blocking scenarios).
      return false;
    }
  }

  // create the full-screen element depending on detection
  (function render() {
    var mobile = isMobileDevice();
    var el = document.createElement('div');
    el.className = 'full ' + (mobile ? 'mobile' : 'desktop');

    var label = document.createElement('div');
    label.className = 'label';
    label.textContent = mobile ? 'Mobile device detected' : 'Desktop device detected';
    el.appendChild(label);

    var sub = document.createElement('div');
    sub.className = 'sub';
    sub.textContent = mobile ? 'All screen red' : 'All screen green';
    el.appendChild(sub);

    document.body.appendChild(el);
  })();
</script>
</body>
</html>
